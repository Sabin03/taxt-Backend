{
    "sourceFile": "src/app/admin-login/admin-login.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 21,
            "patches": [
                {
                    "date": 1721121203153,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1721483698520,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,10 @@\n import { Component, OnInit } from '@angular/core';\n import { MatSnackBar } from '@angular/material/snack-bar';\n import { ActivatedRoute, Router } from '@angular/router';\n+import { WebService } from '../web.service';\n+import { MainSocketService } from '../main-socket.service';\n+import { Common } from '../common';\n \n @Component({\n   selector: 'app-admin-login',\n   templateUrl: './admin-login.component.html',\n@@ -9,21 +12,23 @@\n })\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n-  returnUrl: string|undefined;\n+  //returnUrl: string|undefined;\n  \n \n   constructor(\n     private snackBar: MatSnackBar,\n     private route: ActivatedRoute,\n     private router: Router,\n+    private webService: WebService,\n+    private socket: MainSocketService,\n    \n   ) {\n \n   }\n   ngOnInit(): void {\n-   this.returnUrl = this.route.snapshot.queryParams[\"returnUrl\"] || '/';\n+   \n   }\n \n   openMessage(message: string) {\n     this.snackBar.open(message, 'Ok', {\n@@ -31,8 +36,18 @@\n     })\n   }\n \n   login(){\n-   this.router.navigate([this.returnUrl]);\n+    this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n+    .then( (responseObj: any) => {\n+      Common.Dlog(responseObj);\n+      if(responseObj.status == 1) {\n+\n+        localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n+        this.router.navigate([\"/\"]);\n+      }else{\n+        this.openMessage(responseObj.message);\n+      }\n+    } )\n   }\n \n }\n"
                },
                {
                    "date": 1721484052549,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,9 @@\n })\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n-  //returnUrl: string|undefined;\n+  returnUrl: string|undefined;\n  \n \n   constructor(\n     private snackBar: MatSnackBar,\n@@ -42,9 +42,10 @@\n       Common.Dlog(responseObj);\n       if(responseObj.status == 1) {\n \n         localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n-        this.router.navigate([\"/\"]);\n+        this.router.navigate([this.returnUrl]);\n+        //this.router.navigate([\"/\"]);\n       }else{\n         this.openMessage(responseObj.message);\n       }\n     } )\n"
                },
                {
                    "date": 1721487430508,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,10 +42,10 @@\n       Common.Dlog(responseObj);\n       if(responseObj.status == 1) {\n \n         localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n-        this.router.navigate([this.returnUrl]);\n-        //this.router.navigate([\"/\"]);\n+        //this.router.navigate([this.returnUrl]);\n+        this.router.navigate([\"/\"]);\n       }else{\n         this.openMessage(responseObj.message);\n       }\n     } )\n"
                },
                {
                    "date": 1721496752377,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,54 @@\n+import { Component, OnInit } from '@angular/core';\n+import { MatSnackBar } from '@angular/material/snack-bar';\n+import { ActivatedRoute, Router } from '@angular/router';\n+import { WebService } from '../web.service';\n+import { MainSocketService } from '../main-socket.service';\n+import { Common } from '../common';\n+\n+@Component({\n+  selector: 'app-admin-login',\n+  templateUrl: './admin-login.component.html',\n+  styleUrl: './admin-login.component.css'\n+})\n+export class AdminLoginComponent implements OnInit {\n+  userName = '';\n+  password = '';\n+  //returnUrl: string|undefined;\n+ \n+\n+  constructor(\n+    private snackBar: MatSnackBar,\n+    private route: ActivatedRoute,\n+    private router: Router,\n+    private webService: WebService,\n+    private socket: MainSocketService,\n+   \n+  ) {\n+\n+  }\n+  ngOnInit(): void {\n+   \n+  }\n+\n+  openMessage(message: string) {\n+    this.snackBar.open(message, 'Ok', {\n+      duration: 2000\n+    })\n+  }\n+\n+  login(){\n+    this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n+    .then( (responseObj: any) => {\n+      Common.Dlog(responseObj);\n+      if(responseObj.status == 1) {\n+\n+        localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n+        //this.router.navigate([this.returnUrl]);\n+        this.router.navigate([\"/\"]);\n+      }else{\n+        this.openMessage(responseObj.message);\n+      }\n+    } )\n+  }\n+\n+}\n"
                },
                {
                    "date": 1721497040278,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,58 +51,4 @@\n     } )\n   }\n \n }\n-import { Component, OnInit } from '@angular/core';\n-import { MatSnackBar } from '@angular/material/snack-bar';\n-import { ActivatedRoute, Router } from '@angular/router';\n-import { WebService } from '../web.service';\n-import { MainSocketService } from '../main-socket.service';\n-import { Common } from '../common';\n-\n-@Component({\n-  selector: 'app-admin-login',\n-  templateUrl: './admin-login.component.html',\n-  styleUrl: './admin-login.component.css'\n-})\n-export class AdminLoginComponent implements OnInit {\n-  userName = '';\n-  password = '';\n-  returnUrl: string|undefined;\n- \n-\n-  constructor(\n-    private snackBar: MatSnackBar,\n-    private route: ActivatedRoute,\n-    private router: Router,\n-    private webService: WebService,\n-    private socket: MainSocketService,\n-   \n-  ) {\n-\n-  }\n-  ngOnInit(): void {\n-   \n-  }\n-\n-  openMessage(message: string) {\n-    this.snackBar.open(message, 'Ok', {\n-      duration: 2000\n-    })\n-  }\n-\n-  login(){\n-    this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n-    .then( (responseObj: any) => {\n-      Common.Dlog(responseObj);\n-      if(responseObj.status == 1) {\n-\n-        localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n-        //this.router.navigate([this.returnUrl]);\n-        this.router.navigate([\"/\"]);\n-      }else{\n-        this.openMessage(responseObj.message);\n-      }\n-    } )\n-  }\n-\n-}\n"
                },
                {
                    "date": 1721497100577,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n \n   login(){\n     this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n     .then( (responseObj: any) => {\n-      Common.Dlog(responseObj);\n+      //Common.Dlog(responseObj);\n       if(responseObj.status == 1) {\n \n         localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n         //this.router.navigate([this.returnUrl]);\n"
                },
                {
                    "date": 1721497386051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,9 @@\n })\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n-  //returnUrl: string|undefined;\n+  returnUrl: string|undefined;\n  \n \n   constructor(\n     private snackBar: MatSnackBar,\n@@ -42,10 +42,10 @@\n       //Common.Dlog(responseObj);\n       if(responseObj.status == 1) {\n \n         localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n-        //this.router.navigate([this.returnUrl]);\n-        this.router.navigate([\"/\"]);\n+        this.router.navigate([this.returnUrl]);\n+        //this.router.navigate([\"/\"]);\n       }else{\n         this.openMessage(responseObj.message);\n       }\n     } )\n"
                },
                {
                    "date": 1721500098901,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n import { Component, OnInit } from '@angular/core';\n import { MatSnackBar } from '@angular/material/snack-bar';\n import { ActivatedRoute, Router } from '@angular/router';\n import { WebService } from '../web.service';\n-import { MainSocketService } from '../main-socket.service';\n+import { MainSocketService } from '../common';\n import { Common } from '../common';\n \n @Component({\n   selector: 'app-admin-login',\n"
                },
                {
                    "date": 1721500235581,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n import { Component, OnInit } from '@angular/core';\n import { MatSnackBar } from '@angular/material/snack-bar';\n import { ActivatedRoute, Router } from '@angular/router';\n import { WebService } from '../web.service';\n-import { MainSocketService } from '../common';\n+import { MainSocketService } from '../main-socket.service';\n import { Common } from '../common';\n \n @Component({\n   selector: 'app-admin-login',\n"
                },
                {
                    "date": 1721500825648,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { Component, OnInit } from '@angular/core';\n+import { Component, OnInit, Inject, PLATFORM_ID } from '@angular/core';\n import { MatSnackBar } from '@angular/material/snack-bar';\n import { ActivatedRoute, Router } from '@angular/router';\n import { WebService } from '../web.service';\n import { MainSocketService } from '../main-socket.service';\n@@ -7,48 +7,46 @@\n \n @Component({\n   selector: 'app-admin-login',\n   templateUrl: './admin-login.component.html',\n-  styleUrl: './admin-login.component.css'\n+  styleUrls: ['./admin-login.component.css'] // fixed typo: styleUrl -> styleUrls\n })\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n-  returnUrl: string|undefined;\n- \n+  returnUrl: string | undefined;\n \n   constructor(\n     private snackBar: MatSnackBar,\n     private route: ActivatedRoute,\n     private router: Router,\n     private webService: WebService,\n     private socket: MainSocketService,\n-   \n-  ) {\n+    @Inject(PLATFORM_ID) private platformId: string,\n+  ) {}\n \n-  }\n-  ngOnInit(): void {\n-   \n-  }\n+  ngOnInit(): void {}\n \n   openMessage(message: string) {\n     this.snackBar.open(message, 'Ok', {\n-      duration: 2000\n-    })\n+      duration: 2000,\n+    });\n   }\n \n-  login(){\n-    this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n-    .then( (responseObj: any) => {\n-      //Common.Dlog(responseObj);\n-      if(responseObj.status == 1) {\n-\n-        localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n-        this.router.navigate([this.returnUrl]);\n-        //this.router.navigate([\"/\"]);\n-      }else{\n-        this.openMessage(responseObj.message);\n-      }\n-    } )\n+  login() {\n+    this.webService.action(Common.svLogin, { email: this.userName, password: this.password, socket_id: this.socket.sid })\n+     .then((responseObj: any) => {\n+        // Common.Dlog(responseObj);\n+        if (responseObj.status === 1) {\n+          if (this.platformId === 'browser') {\n+            localStorage.setItem('auth_token', responseObj.payload.auth_token);\n+          } else {\n+            console.error('Cannot set localStorage in non-browser environment');\n+          }\n+          this.router.navigate([this.returnUrl]);\n+          // this.router.navigate([\"/\"]);\n+        } else {\n+          this.openMessage(responseObj.message);\n+        }\n+      });\n   }\n-\n-}\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1721500950407,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { Component, OnInit, Inject, PLATFORM_ID } from '@angular/core';\n+import { Component, OnInit } from '@angular/core';\n import { MatSnackBar } from '@angular/material/snack-bar';\n import { ActivatedRoute, Router } from '@angular/router';\n import { WebService } from '../web.service';\n import { MainSocketService } from '../main-socket.service';\n@@ -7,46 +7,48 @@\n \n @Component({\n   selector: 'app-admin-login',\n   templateUrl: './admin-login.component.html',\n-  styleUrls: ['./admin-login.component.css'] // fixed typo: styleUrl -> styleUrls\n+  styleUrl: './admin-login.component.css'\n })\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n-  returnUrl: string | undefined;\n+  returnUrl: string|undefined;\n+ \n \n   constructor(\n     private snackBar: MatSnackBar,\n     private route: ActivatedRoute,\n     private router: Router,\n     private webService: WebService,\n     private socket: MainSocketService,\n-    @Inject(PLATFORM_ID) private platformId: string,\n-  ) {}\n+   \n+  ) {\n \n-  ngOnInit(): void {}\n+  }\n+  ngOnInit(): void {\n+   \n+  }\n \n   openMessage(message: string) {\n     this.snackBar.open(message, 'Ok', {\n-      duration: 2000,\n-    });\n+      duration: 2000\n+    })\n   }\n \n-  login() {\n-    this.webService.action(Common.svLogin, { email: this.userName, password: this.password, socket_id: this.socket.sid })\n-     .then((responseObj: any) => {\n-        // Common.Dlog(responseObj);\n-        if (responseObj.status === 1) {\n-          if (this.platformId === 'browser') {\n-            localStorage.setItem('auth_token', responseObj.payload.auth_token);\n\\ No newline at end of file\n-          } else {\n-            console.error('Cannot set localStorage in non-browser environment');\n-          }\n-          this.router.navigate([this.returnUrl]);\n-          // this.router.navigate([\"/\"]);\n-        } else {\n-          this.openMessage(responseObj.message);\n-        }\n-      });\n+  login(){\n+    this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n+    .then( (responseObj: any) => {\n+      //Common.Dlog(responseObj);\n+      if(responseObj.status == 1) {\n+\n+        localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n+        this.router.navigate([this.returnUrl]);\n+        //this.router.navigate([\"/\"]);\n+      }else{\n+        this.openMessage(responseObj.message);\n+      }\n+    } )\n   }\n-}\n+\n+}\n"
                },
                {
                    "date": 1721501134736,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,10 +42,10 @@\n       //Common.Dlog(responseObj);\n       if(responseObj.status == 1) {\n \n         localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n-        this.router.navigate([this.returnUrl]);\n-        //this.router.navigate([\"/\"]);\n+        //this.router.navigate([this.returnUrl]);\n+        this.router.navigate([\"/\"]);\n       }else{\n         this.openMessage(responseObj.message);\n       }\n     } )\n"
                },
                {
                    "date": 1721501344590,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n \n   login(){\n     this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n     .then( (responseObj: any) => {\n-      //Common.Dlog(responseObj);\n+      Common.Dlog(responseObj);\n       if(responseObj.status == 1) {\n \n         localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n         //this.router.navigate([this.returnUrl]);\n"
                },
                {
                    "date": 1721548695037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,54 @@\n+import { Component, OnInit } from '@angular/core';\n+import { MatSnackBar } from '@angular/material/snack-bar';\n+import { ActivatedRoute, Router } from '@angular/router';\n+import { WebService } from '../web.service';\n+import { MainSocketService } from '../main-socket.service';\n+import { Common } from '../common';\n+\n+@Component({\n+  selector: 'app-admin-login',\n+  templateUrl: './admin-login.component.html',\n+  styleUrl: './admin-login.component.css'\n+})\n+export class AdminLoginComponent implements OnInit {\n+  userName = '';\n+  password = '';\n+  //returnUrl: string|undefined;\n+ \n+\n+  constructor(\n+    private snackBar: MatSnackBar,\n+    private route: ActivatedRoute,\n+    private router: Router,\n+    private webService: WebService,\n+    private socket: MainSocketService,\n+   \n+  ) {\n+\n+  }\n+  ngOnInit(): void {\n+   \n+  }\n+\n+  openMessage(message: string) {\n+    this.snackBar.open(message, 'Ok', {\n+      duration: 2000\n+    })\n+  }\n+\n+  login(){\n+    this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n+    .then( (responseObj: any) => {\n+      Common.Dlog(responseObj);\n+      if(responseObj.status == 1) {\n+\n+        localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n+        //this.router.navigate([this.returnUrl]);\n+        this.router.navigate([\"/\"]);\n+      }else{\n+        this.openMessage(responseObj.message);\n+      }\n+    } )\n+  }\n+\n+}\n"
                },
                {
                    "date": 1721561685818,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,58 +51,4 @@\n     } )\n   }\n \n }\n-import { Component, OnInit } from '@angular/core';\n-import { MatSnackBar } from '@angular/material/snack-bar';\n-import { ActivatedRoute, Router } from '@angular/router';\n-import { WebService } from '../web.service';\n-import { MainSocketService } from '../main-socket.service';\n-import { Common } from '../common';\n-\n-@Component({\n-  selector: 'app-admin-login',\n-  templateUrl: './admin-login.component.html',\n-  styleUrl: './admin-login.component.css'\n-})\n-export class AdminLoginComponent implements OnInit {\n-  userName = '';\n-  password = '';\n-  returnUrl: string|undefined;\n- \n-\n-  constructor(\n-    private snackBar: MatSnackBar,\n-    private route: ActivatedRoute,\n-    private router: Router,\n-    private webService: WebService,\n-    private socket: MainSocketService,\n-   \n-  ) {\n-\n-  }\n-  ngOnInit(): void {\n-   \n-  }\n-\n-  openMessage(message: string) {\n-    this.snackBar.open(message, 'Ok', {\n-      duration: 2000\n-    })\n-  }\n-\n-  login(){\n-    this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n-    .then( (responseObj: any) => {\n-      Common.Dlog(responseObj);\n-      if(responseObj.status == 1) {\n-\n-        localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n-        //this.router.navigate([this.returnUrl]);\n-        this.router.navigate([\"/\"]);\n-      }else{\n-        this.openMessage(responseObj.message);\n-      }\n-    } )\n-  }\n-\n-}\n"
                },
                {
                    "date": 1721563186006,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,9 @@\n })\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n-  //returnUrl: string|undefined;\n+  returnUrl: string|undefined;\n  \n \n   constructor(\n     private snackBar: MatSnackBar,\n"
                },
                {
                    "date": 1721567257818,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,10 @@\n })\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n-  returnUrl: string|undefined;\n+  //returnUrl: string|undefined;\n+  any: any;\n  \n \n   constructor(\n     private snackBar: MatSnackBar,\n@@ -36,9 +37,10 @@\n     })\n   }\n \n   login(){\n-    this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n+    this.webService.action(Common.svLogin, { \"email\": this.any, \"password\": this.any, \"socket_id\": this.socket.sid  } )\n+    //this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n     .then( (responseObj: any) => {\n       Common.Dlog(responseObj);\n       if(responseObj.status == 1) {\n \n"
                },
                {
                    "date": 1721567288122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,10 +13,10 @@\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n   //returnUrl: string|undefined;\n-  any: any;\n  \n+ \n \n   constructor(\n     private snackBar: MatSnackBar,\n     private route: ActivatedRoute,\n@@ -37,10 +37,10 @@\n     })\n   }\n \n   login(){\n-    this.webService.action(Common.svLogin, { \"email\": this.any, \"password\": this.any, \"socket_id\": this.socket.sid  } )\n-    //this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n+    \n+   this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n     .then( (responseObj: any) => {\n       Common.Dlog(responseObj);\n       if(responseObj.status == 1) {\n \n"
                },
                {
                    "date": 1722110063166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,8 +12,9 @@\n })\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n+  returnUrl: any;\n   //returnUrl: string|undefined;\n  \n  \n \n@@ -44,10 +45,10 @@\n       Common.Dlog(responseObj);\n       if(responseObj.status == 1) {\n \n         localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n-        //this.router.navigate([this.returnUrl]);\n-        this.router.navigate([\"/\"]);\n+        this.router.navigate([this.returnUrl]);\n+        //this.router.navigate([\"/\"]);\n       }else{\n         this.openMessage(responseObj.message);\n       }\n     } )\n"
                },
                {
                    "date": 1722110244480,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,51 +7,51 @@\n \n @Component({\n   selector: 'app-admin-login',\n   templateUrl: './admin-login.component.html',\n-  styleUrl: './admin-login.component.css'\n+  styleUrls: ['./admin-login.component.css']\n })\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n-  returnUrl: any;\n-  //returnUrl: string|undefined;\n- \n- \n+  returnUrl: string | undefined;\n \n   constructor(\n     private snackBar: MatSnackBar,\n     private route: ActivatedRoute,\n     private router: Router,\n     private webService: WebService,\n     private socket: MainSocketService,\n-   \n-  ) {\n+  ) { }\n \n-  }\n   ngOnInit(): void {\n-   \n+    this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n   }\n \n   openMessage(message: string) {\n     this.snackBar.open(message, 'Ok', {\n       duration: 2000\n     })\n   }\n \n-  login(){\n-    \n-   this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n-    .then( (responseObj: any) => {\n-      Common.Dlog(responseObj);\n-      if(responseObj.status == 1) {\n+  login() {\n+    if (!this.userName || !this.password) {\n+      this.openMessage('Please enter both email and password');\n+      return;\n+    }\n \n-        localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n-        this.router.navigate([this.returnUrl]);\n-        //this.router.navigate([\"/\"]);\n-      }else{\n-        this.openMessage(responseObj.message);\n-      }\n-    } )\n+    this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid })\n+      .then((responseObj: any) => {\n+        Common.Dlog(responseObj);\n+        if (responseObj.status == 1) {\n+          localStorage.setItem(\"auth_token\", responseObj.payload.auth_token)\n+          this.router.navigate([this.returnUrl]);\n+        } else {\n+          this.openMessage(responseObj.message);\n+        }\n+      })\n+      .catch((error) => {\n+        this.openMessage('An error occurred during login');\n+        console.error(error);\n+      })\n   }\n-\n }\n"
                },
                {
                    "date": 1722110266249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,51 +7,50 @@\n \n @Component({\n   selector: 'app-admin-login',\n   templateUrl: './admin-login.component.html',\n-  styleUrls: ['./admin-login.component.css']\n+  styleUrl: './admin-login.component.css'\n })\n export class AdminLoginComponent implements OnInit {\n   userName = '';\n   password = '';\n-  returnUrl: string | undefined;\n+  //returnUrl: string|undefined;\n+ \n+ \n \n   constructor(\n     private snackBar: MatSnackBar,\n     private route: ActivatedRoute,\n     private router: Router,\n     private webService: WebService,\n     private socket: MainSocketService,\n-  ) { }\n+   \n+  ) {\n \n+  }\n   ngOnInit(): void {\n-    this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n+   \n   }\n \n   openMessage(message: string) {\n     this.snackBar.open(message, 'Ok', {\n       duration: 2000\n     })\n   }\n \n-  login() {\n-    if (!this.userName || !this.password) {\n-      this.openMessage('Please enter both email and password');\n-      return;\n-    }\n+  login(){\n+    \n+   this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid  } )\n+    .then( (responseObj: any) => {\n+      Common.Dlog(responseObj);\n+      if(responseObj.status == 1) {\n \n-    this.webService.action(Common.svLogin, { \"email\": this.userName, \"password\": this.password, \"socket_id\": this.socket.sid })\n-      .then((responseObj: any) => {\n-        Common.Dlog(responseObj);\n-        if (responseObj.status == 1) {\n-          localStorage.setItem(\"auth_token\", responseObj.payload.auth_token)\n-          this.router.navigate([this.returnUrl]);\n-        } else {\n-          this.openMessage(responseObj.message);\n-        }\n-      })\n-      .catch((error) => {\n-        this.openMessage('An error occurred during login');\n-        console.error(error);\n-      })\n+        localStorage.setItem(\"auth_token\", responseObj.payload.auth_token )\n+        //this.router.navigate([this.returnUrl]);\n+        this.router.navigate([\"/\"]);\n+      }else{\n+        this.openMessage(responseObj.message);\n+      }\n+    } )\n   }\n+\n }\n"
                }
            ],
            "date": 1721121203153,
            "name": "Commit-0",
            "content": "import { Component, OnInit } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { ActivatedRoute, Router } from '@angular/router';\n\n@Component({\n  selector: 'app-admin-login',\n  templateUrl: './admin-login.component.html',\n  styleUrl: './admin-login.component.css'\n})\nexport class AdminLoginComponent implements OnInit {\n  userName = '';\n  password = '';\n  returnUrl: string|undefined;\n \n\n  constructor(\n    private snackBar: MatSnackBar,\n    private route: ActivatedRoute,\n    private router: Router,\n   \n  ) {\n\n  }\n  ngOnInit(): void {\n   this.returnUrl = this.route.snapshot.queryParams[\"returnUrl\"] || '/';\n  }\n\n  openMessage(message: string) {\n    this.snackBar.open(message, 'Ok', {\n      duration: 2000\n    })\n  }\n\n  login(){\n   this.router.navigate([this.returnUrl]);\n  }\n\n}\n"
        }
    ]
}