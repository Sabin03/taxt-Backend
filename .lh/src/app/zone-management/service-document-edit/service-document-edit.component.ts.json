{
    "sourceFile": "src/app/zone-management/service-document-edit/service-document-edit.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1722266072051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1722327177554,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { Component, Inject, OnInit } from '@angular/core';\n+/*import { Component, Inject, OnInit } from '@angular/core';\n import { ZoneDocument } from '../../model/zone-document';\n import { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\n import { WebService } from '../../web.service';\n import { MatSnackBar } from '@angular/material/snack-bar';\n@@ -129,5 +129,127 @@\n         this.openSnackBar(responseObj.message);\n       }\n     })\n   }\n+}*/\n+\n+\n+import { Component, Inject, OnInit } from '@angular/core';\n+import { ZoneDocument } from '../../model/zone-document';\n+import { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\n+import { WebService } from '../../web.service';\n+import { MatSnackBar } from '@angular/material/snack-bar';\n+import { Common } from '../../common';\n+\n+interface Document {\n+  type: number;\n+  doc_id: number;\n+  isSelect: boolean;\n+  name: string;\n+  // Add any other properties if needed\n }\n+\n+@Component({\n+  selector: 'app-service-document-edit',\n+  templateUrl: './service-document-edit.component.html',\n+  styleUrls: ['./service-document-edit.component.css']\n+})\n+export class ServiceDocumentEditComponent implements OnInit {\n+  editObj: ZoneDocument = new ZoneDocument();\n+\n+  documentArr: Array<Document> = [];\n+  personalDocumentArr: Array<Document> = [];\n+  carDocumentArr: Array<Document> = [];\n+\n+  personalDoc = '';\n+  personalDocName = '';\n+  carDoc = '';\n+  carDocName = '';\n+\n+  constructor(\n+    public dialogRef: MatDialogRef<ServiceDocumentEditComponent>,\n+    @Inject(MAT_DIALOG_DATA) public data: any,\n+    private webService: WebService,\n+    public snackBar: MatSnackBar,\n+  ) {\n+    this.editObj = Object.assign({}, data.edit);\n+    this.documentArr = Object.assign([], data.doc);\n+  }\n+\n+  onNoClick(): void {\n+    this.dialogRef.close();\n+  }\n+\n+  ngOnInit() {\n+    Common.Dlog(this.documentArr);\n+    this.documentArr.forEach(docObj => {\n+      if (docObj.type === 1) {\n+        this.processDocumentIds(this.editObj.document_ids, docObj);\n+        this.personalDocumentArr.push(docObj);\n+      } else {\n+        this.processDocumentIds(this.editObj.car_document_ids, docObj);\n+        this.carDocumentArr.push(docObj);\n+      }\n+    });\n+  }\n+\n+  processDocumentIds(data: string | null, docObj: Document) {\n+    if (data) {\n+      data.split(',').forEach(docId => {\n+        if (docId === docObj.doc_id.toString()) {\n+          docObj.isSelect = true;\n+        }\n+      });\n+    }\n+  }\n+\n+  serviceDocumentCheckedClick(docObj: Document, event: any) {\n+    docObj.isSelect = event.checked;\n+  }\n+\n+  openSnackBar(message: string) {\n+    Common.Dlog(message);\n+    this.snackBar.open(message, 'Ok', {\n+      duration: 5000,\n+    });\n+  }\n+\n+  updateData() {\n+    this.personalDoc = '';\n+    this.personalDocName = '';\n+    this.carDocName = '';\n+    this.carDoc = '';\n+\n+    this.personalDocumentArr.forEach(docObj => {\n+      if (docObj.isSelect) {\n+        this.personalDoc += `${docObj.doc_id},`;\n+        this.personalDocName += `${docObj.name},`;\n+      }\n+    });\n+\n+    this.carDocumentArr.forEach(docObj => {\n+      if (docObj.isSelect) {\n+        this.carDoc += `${docObj.doc_id},`;\n+        this.carDocName += `${docObj.name},`;\n+      }\n+    });\n+\n+    this.editObj.document_name = this.personalDocName.replace(/,\\s*$/, '');\n+    this.editObj.document_ids = this.personalDoc.replace(/,\\s*$/, '');\n+    this.editObj.car_document_name = this.carDocName.replace(/,\\s*$/, '');\n+    this.editObj.car_document_ids = this.carDoc.replace(/,\\s*$/, '');\n+\n+    this.webService.action(Common.svEditServiceDocument, {\n+      zone_doc_id: this.editObj.zone_doc_id,\n+      personal_doc: this.editObj.document_ids,\n+      car_doc: this.editObj.car_document_ids\n+    }, true).then((responseObj: any) => {\n+      this.openSnackBar(responseObj.message);\n+      if (responseObj.status === 1) {\n+        this.dialogRef.close(this.editObj);\n+      }\n+    }).catch(error => {\n+      this.openSnackBar('An error occurred while updating the data.');\n+      console.error(error);\n+    });\n+  }\n+}\n"
                },
                {
                    "date": 1726388823862,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,139 +1,6 @@\n-/*import { Component, Inject, OnInit } from '@angular/core';\n-import { ZoneDocument } from '../../model/zone-document';\n-import { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\n-import { WebService } from '../../web.service';\n-import { MatSnackBar } from '@angular/material/snack-bar';\n-import { Common } from '../../common';\n \n-@Component({\n-  selector: 'app-service-document-edit',\n-  templateUrl: './service-document-edit.component.html',\n-  styleUrl: './service-document-edit.component.css'\n-})\n \n-export class ServiceDocumentEditComponent implements OnInit {\n-  editObj: ZoneDocument = new ZoneDocument();\n-\n-  documentArr: Array<Document> = [];\n-  personalDocumentArr: Array<Document> = [];\n-  carDocumentArr: Array<Document> = [];\n-\n-  personalDoc = \"\";\n-  personalDocName = \"\";\n-  carDoc = \"\";\n-  carDocName = \"\";\n-\n-\n-\n-  constructor(\n-    public dialogRef: MatDialogRef<ServiceDocumentEditComponent>,\n-    @Inject(MAT_DIALOG_DATA) public data: any,\n-    private webService: WebService,\n-    public snackBar: MatSnackBar,\n-  ) {\n-\n-    this.editObj = Object.assign({}, data.edit);\n-    this.documentArr = Object.assign([], data.doc);\n-\n-  }\n-  onNoClick(): void {\n-    this.dialogRef.close();\n-  }\n-\n-  ngOnInit() {\n-\n-    Common.Dlog(this.documentArr);\n-    this.documentArr.forEach(docObj => {\n-\n-      if (docObj.type == 1) {\n-        var data = this.editObj.document_ids\n-\n-        if (data != null) {\n-          data.split(',').forEach(docId => {\n-\n-\n-\n-            if (docId == docObj.doc_id.toString()) {\n-              docObj.isSelect = true;\n-            }\n-          })\n-        }\n-\n-        this.personalDocumentArr.push(docObj);\n-      } else {\n-        var data = this.editObj.car_document_ids\n-\n-        if (data != null) {\n-          data.split(',').forEach(docId => {\n-            if (docId == docObj.doc_id.toString()) {\n-              docObj.isSelect = true;\n-            }\n-          })\n-        }\n-        this.carDocumentArr.push(docObj);\n-      }\n-    })\n-  }\n-\n-  serviceDocumentCheckedClick(docObj: Document, event: any) {\n-    docObj.isSelect = event.checked;\n-  }\n-\n-  openSnackBar(message: string) {\n-\n-    Common.Dlog(message);\n-    this.snackBar.open(message, 'Ok', {\n-      duration: 5000,\n-    });\n-  }\n-\n-  updateData() {\n-\n-    this.personalDoc = \"\";\n-    this.personalDocName = \"\";\n-    this.carDocName = \"\";\n-    this.carDoc = \"\";\n-\n-    this.personalDocumentArr.forEach(docObj => {\n-      if (docObj.isSelect == true) {\n-        this.personalDoc = this.personalDoc + docObj.doc_id + ',';\n-        this.personalDocName = this.personalDocName + docObj.name + ',';\n-      }\n-    })\n-\n-    this.carDocumentArr.forEach(docObj => {\n-      if (docObj.isSelect == true) {\n-        this.carDoc = this.carDoc + docObj.doc_id + ',';\n-        this.carDocName = this.carDocName + docObj.name + ',';\n-      }\n-    })\n-\n-    this.editObj.document_name = this.personalDocName.replace(/,\\s*$/, '');\n-    this.editObj.document_ids = this.personalDoc.replace(/,\\s*$/, '');\n-\n-    this.editObj.car_document_name = this.carDocName.replace(/,\\s*$/, '');\n-    this.editObj.car_document_ids = this.carDoc.replace(/,\\s*$/, '');\n-\n-\n-    this.webService.action(Common.svEditServiceDocument, {\n-      \"zone_doc_id\": this.editObj.zone_doc_id,\n-      \"personal_doc\": this.editObj.document_ids,\n-      \"car_doc\": this.editObj.car_document_ids\n-    }, true).then((responseObj: any) => {\n-      if (responseObj.status == 1) {\n-\n-        this.openSnackBar(responseObj.message);\n-        this.dialogRef.close(this.editObj);\n-\n-      } else {\n-        this.openSnackBar(responseObj.message);\n-      }\n-    })\n-  }\n-}*/\n-\n-\n import { Component, Inject, OnInit } from '@angular/core';\n import { ZoneDocument } from '../../model/zone-document';\n import { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\n import { WebService } from '../../web.service';\n"
                }
            ],
            "date": 1722266072051,
            "name": "Commit-0",
            "content": "import { Component, Inject, OnInit } from '@angular/core';\nimport { ZoneDocument } from '../../model/zone-document';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { WebService } from '../../web.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { Common } from '../../common';\n\n@Component({\n  selector: 'app-service-document-edit',\n  templateUrl: './service-document-edit.component.html',\n  styleUrl: './service-document-edit.component.css'\n})\n\nexport class ServiceDocumentEditComponent implements OnInit {\n  editObj: ZoneDocument = new ZoneDocument();\n\n  documentArr: Array<Document> = [];\n  personalDocumentArr: Array<Document> = [];\n  carDocumentArr: Array<Document> = [];\n\n  personalDoc = \"\";\n  personalDocName = \"\";\n  carDoc = \"\";\n  carDocName = \"\";\n\n\n\n  constructor(\n    public dialogRef: MatDialogRef<ServiceDocumentEditComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: any,\n    private webService: WebService,\n    public snackBar: MatSnackBar,\n  ) {\n\n    this.editObj = Object.assign({}, data.edit);\n    this.documentArr = Object.assign([], data.doc);\n\n  }\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n\n  ngOnInit() {\n\n    Common.Dlog(this.documentArr);\n    this.documentArr.forEach(docObj => {\n\n      if (docObj.type == 1) {\n        var data = this.editObj.document_ids\n\n        if (data != null) {\n          data.split(',').forEach(docId => {\n\n\n\n            if (docId == docObj.doc_id.toString()) {\n              docObj.isSelect = true;\n            }\n          })\n        }\n\n        this.personalDocumentArr.push(docObj);\n      } else {\n        var data = this.editObj.car_document_ids\n\n        if (data != null) {\n          data.split(',').forEach(docId => {\n            if (docId == docObj.doc_id.toString()) {\n              docObj.isSelect = true;\n            }\n          })\n        }\n        this.carDocumentArr.push(docObj);\n      }\n    })\n  }\n\n  serviceDocumentCheckedClick(docObj: Document, event: any) {\n    docObj.isSelect = event.checked;\n  }\n\n  openSnackBar(message: string) {\n\n    Common.Dlog(message);\n    this.snackBar.open(message, 'Ok', {\n      duration: 5000,\n    });\n  }\n\n  updateData() {\n\n    this.personalDoc = \"\";\n    this.personalDocName = \"\";\n    this.carDocName = \"\";\n    this.carDoc = \"\";\n\n    this.personalDocumentArr.forEach(docObj => {\n      if (docObj.isSelect == true) {\n        this.personalDoc = this.personalDoc + docObj.doc_id + ',';\n        this.personalDocName = this.personalDocName + docObj.name + ',';\n      }\n    })\n\n    this.carDocumentArr.forEach(docObj => {\n      if (docObj.isSelect == true) {\n        this.carDoc = this.carDoc + docObj.doc_id + ',';\n        this.carDocName = this.carDocName + docObj.name + ',';\n      }\n    })\n\n    this.editObj.document_name = this.personalDocName.replace(/,\\s*$/, '');\n    this.editObj.document_ids = this.personalDoc.replace(/,\\s*$/, '');\n\n    this.editObj.car_document_name = this.carDocName.replace(/,\\s*$/, '');\n    this.editObj.car_document_ids = this.carDoc.replace(/,\\s*$/, '');\n\n\n    this.webService.action(Common.svEditServiceDocument, {\n      \"zone_doc_id\": this.editObj.zone_doc_id,\n      \"personal_doc\": this.editObj.document_ids,\n      \"car_doc\": this.editObj.car_document_ids\n    }, true).then((responseObj: any) => {\n      if (responseObj.status == 1) {\n\n        this.openSnackBar(responseObj.message);\n        this.dialogRef.close(this.editObj);\n\n      } else {\n        this.openSnackBar(responseObj.message);\n      }\n    })\n  }\n}\n"
        }
    ]
}