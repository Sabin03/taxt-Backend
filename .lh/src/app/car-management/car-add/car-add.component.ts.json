{
    "sourceFile": "src/app/car-management/car-add/car-add.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1722328967676,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1722328967676,
            "name": "Commit-0",
            "content": "import { Component, OnInit } from '@angular/core';\nimport { Brand } from '../../model/brand';\nimport { Model } from '../../model/model';\nimport { Series } from '../../model/series';\nimport { WebService } from '../../web.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { Common } from '../../common';\n\n@Component({\n  selector: 'app-car-add',\n  templateUrl: './car-add.component.html',\n  styleUrl: './car-add.component.css'\n})\nexport class CarAddComponent implements OnInit {\n\n  isOther = -1;\n  selectBrandId: number|null = null;\n  selectModelId: number | null = null;\n  selectSeriesId: number | null = null;\n  txtSeat = '';\n  txtBrand = '';\n  txtModel =  '';\n  txtSeries = '';\n\n  brandArr: Array<Brand> = [];\n  modelArr: Array<Model> = [];\n  seriesArr: Array<Series> = [];\n\n  constructor(private webService: WebService, public snackBar: MatSnackBar) {\n\n  }\n  ngOnInit(): void {\n    this.getBrandList();\n  }\n\n  openSnackBar(message: string) {\n    this.snackBar.open(message, \"ok\", {\n      duration: 2000,\n    });\n  }\n\n  onBrandChange(selectId: any) {\n    this.selectBrandId = selectId;\n    if(this.selectBrandId == 0) {\n      this.isOther = 1;\n    }else{\n      this.isOther = 0;\n      this.getModelList(selectId);\n    }\n  }\n\n  onModelChange(selectId: any) {\n    this.selectModelId = selectId;\n    if (this.selectModelId == 0) {\n      this.isOther = 2;\n    } else {\n      this.isOther = 0;\n      this.getSeriesList(selectId);\n    }\n  }\n\n  onSeriesChange(selectId: any) {\n    this.selectSeriesId = selectId;\n    if (this.selectSeriesId == 0) {\n      this.isOther = 3;\n    } else {\n      this.isOther = 0;\n    }\n  }\n\n\n  getBrandList(){\n\n    this.webService.action(Common.svListBrand, {}, true).then((responseObj: any) => {\n      this.brandArr = responseObj.payload;\n    })\n  }\n\n  getModelList(brandId: any) {\n    this.webService.action(Common.svListModel, { \"brand_id\": brandId }, true).then((responseObj: any) => {\n      this.modelArr = responseObj.payload;\n    })\n  }\n\n  getSeriesList(modelId: any) {\n    this.webService.action(Common.svListSeries, { \"model_id\": modelId }, true).then((responseObj: any) => {\n      this.seriesArr = responseObj.payload;\n    })\n  }\n\n  addCar(){\n\n    let carBrand: number|string = this.txtBrand;\n    let carModel: number | string = this.txtModel;\n    let carSeries: number | string = this.txtSeries;\n\n    if(this.isOther == -1) {\n      this.openSnackBar(\"please select brand\");\n      return\n    }\n    if(this.isOther == 0) {\n        carBrand = this.selectBrandId ?? \"\";\n        carModel = this.selectModelId ?? \"\";\n        carSeries = this.selectSeriesId ?? \"\";\n    }else if(this.isOther == 1) {\n      if(this.txtBrand == '') {\n        this.openSnackBar(\"please enter brand name\");\n        return;\n      }\n\n      if (this.txtModel == '') {\n        this.openSnackBar(\"please enter model name\");\n        return;\n      }\n    } else if (this.isOther == 2) {\n      \n      if (this.txtModel == '') {\n        this.openSnackBar(\"please enter model name\");\n        return;\n      }\n      carBrand = this.selectBrandId ?? \"\";\n    } else if (this.isOther == 3) {\n      carBrand = this.selectBrandId ?? \"\";\n      carModel = this.selectModelId ?? \"\";\n    }\n\n\n    this.webService.action(Common.svAddCar, {\n      \"brand\": carBrand,\n      \"model\": carModel,\n      \"series\": carSeries,\n      \"seat\": this.txtSeat,\n      \"other_status\": this.isOther\n\n     }, true).then((responseObj: any) => {\n\n       if (responseObj.status == 1) {\n         this.isOther = -1;\n         this.selectBrandId = null;\n         this.selectModelId = null;\n         this.selectSeriesId = null;\n         this.txtSeat  = \"\";\n         this.txtModel = \"\";\n         this.txtBrand = \"\";\n         this.txtSeries = \"\";\n         this.getBrandList();\n       }\n       this.openSnackBar(responseObj.message);\n    })\n  }\n\n\n}\n"
        }
    ]
}